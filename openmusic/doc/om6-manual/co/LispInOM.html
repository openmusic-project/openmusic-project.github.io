<!doctype>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta charset="utf-8"></meta>
<meta name="generator" content="pandoc"></meta>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"></meta>
<title>LispInOM</title>
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
</head>
<body>
<div id="tplf" class="tplPage">

<div id="tplh">

<p><span class="hidden">Navigation générale : </span></p>
<ul>
<li><a href="OM-Documentation.html"><span>Guide</span></a></li>
<li><a href="OM-Documentation_1.html"><span>Plan</span></a></li>
<li><a href="OM-Documentation_2.html"><span>Glossaire</span></a></li>
</ul>
</div>

<div id="tplt">

<p><img src="../tplRes/page/empty.gif" alt="empty.gif"></img><img src="../res/logoom1.png" alt="logoom1.png"></img><span class="tplTi">OpenMusic Documentation</span><span class="sw_outStack_navRoot"><span class="hidden">Hiérarchie de section : </span><a href="OM-User-Manual.html"><span>OM 6.6 User Manual</span></a><span class="stkSep"> > </span><a href="Lisp.html"><span>Lisp Programming</span></a><span class="stkSep"> > </span><span class="stkSel_yes"><span>Lisp Code in OM</span></span></span></p>
</div>

<div class="tplNav">

<p><span class="hidden">Navigation : </span><a href="LispListener.html" title="page pr&eacute;c&eacute;dente(The Listener)"><span>page précédente</span></a><span class="hidden"> | </span><a href="LispFunctions.html" title="page suivante(Lisp Function Boxes)"><span>page suivante</span></a></p>
</div>

<div id="tplc" class="tplc_out_yes">

<div style="text-align: center;">

<p><strong>Attention</strong>, votre navigateur ne supporte pas le <strong>javascript</strong> ou celui-ci à été désactivé. Certaines fonctionnalités de ce guide sont restreintes.</p>
</div>

<div class="headCo">

<h1 id="lisp-code-in-om"><span>Lisp Code in OM</span></h1>
<div class="headCo_co">

<div>

<div class="part">

<h2 id="use-of-user-defined-lisp-functions-in-om"><span>Use of User-Defined Lisp Functions in OM</span></h2>
<div class="part_co">

<div class="infobloc">

<div class="infobloc_ti">

<p><span>Example</span></p>
</div>

<div class="caption">

<div class="caption_co">

<p><img src="../res/basicedition.png" alt="basicedition.png"></img></p>
</div>

</div>

<div class="txt">

<p>All functions and classes defined and evaluated in the Lisp editor can be used in OM patches immediately.</p>
<ol>
<li><p>Evaluate the function or class in the Lisp editor.</p></li>
<li><p><code>Cmd</code> click in the patch and type the name of the function or class.</p></li>
</ol>
</div>

<div class="linkSet">

<div class="linkSet_ti">

<p><span>Voir aussi</span></p>
</div>

<div class="linkUL">

<ul>
<li><a href="LispEditor.html"><span>Writing/Evaluating Lisp Code : The Lisp Editor</span></a></li>
</ul>
</div>

</div>

</div>

<div class="bloc warning">

<div class="bloc_ti warning_ti">

<p><span>Package Name</span></p>
</div>

<div class="txt">

<p>The default package of a function or class edited in the Lisp Editor is the <strong>Cl-user package</strong>. In this case, its name must be preceeded by "cl-user::".</p>
<p>To be able to type a name directly in the patch editor, add "(in-package :om)" before the corresponding code in the lisp editor.</p>
</div>

<div class="caption">

<div class="caption_co">

<div class="imgzFra" style="position: relative;">

<p><img src="../res/typefunction_scr.png" alt="typefunction_scr.png"></img></p>
</div>

</div>

<div class="caption_ti">

<p><a href="../res/typefunction_scr_1.png" title="Zoom (nouvelle fen&ecirc;tre)"><span>Zoom</span></a></p>
</div>

</div>

</div>

<div class="bloc advice">

<div class="bloc_ti advice_ti">

<p><span>Reloading Patches</span></p>
</div>

<div class="txt">

<p>User-defined functions or classes can appear as "dead boxes" if the patch they belong to is saved and reloaded at another OM session. You will then have to reload the function or class.</p>
<p>It is advised to create user libraries : your own Lisp classes and functions will be preserved and available for use at any time.</p>
</div>

<div class="linkSet">

<div class="linkSet_ti">

<p><span>Dead Boxes</span></p>
</div>

<div class="linkUL">

<ul>
<li><a href="DeadBox.html"><span>Missing References : Dead Boxes</span></a></li>
</ul>
</div>

</div>

<div class="linkSet">

<div class="linkSet_ti">

<p><span>User Libraries in OM</span></p>
</div>

<div class="linkUL">

<ul>
<li><a href="UserLibraries.html"><span>Extra Libraries</span></a></li>
<li><a href="LispUserLib.html"><span>Writing an OM Library</span></a></li>
</ul>
</div>

</div>

</div>

</div>

</div>

<div class="part">

<h2 id="loading-lisp-code-in-om"><span>Loading Lisp Code in OM</span></h2>
<div class="part_co">

<div class="infobloc">

<div class="txt">

<p>There exist several ways to load existing Lisp code in OM :</p>
</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="dk_txtRes_txt txt">
<ul>
<li><p><strong>Open a Lisp file and evaluate it, or load it directly from the Listener.</strong> This applies to temporary experiments, since the code has to be loaded manually at each session.</p></li>
</ul>
</div></td>
<td><div class="caption">
<div class="caption_co">
<a href="../res/LisLoad.png" class="overLnk" title="Cliquez pour agrandir"><img src="../res/LisLoad_1.png" width="300" height="257" alt="LisLoad_1.png"></img></a>
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="linkSet">

<div class="linkSet_ti">

<p><span>Listener and Lisp Editor</span></p>
</div>

<div class="linkUL">

<ul>
<li><a href="LispListener.html"><span>The Listener</span></a></li>
<li><a href="LispEditor.html"><span>Writing/Evaluating Lisp Code : The Lisp Editor</span></a></li>
</ul>
</div>

</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="caption">
<div class="caption_co">
<a href="../res/Userfolder.png" class="overLnk" title="Cliquez pour agrandir"><img src="../res/Userfolder_1.png" width="300" height="229" alt="Userfolder_1.png"></img></a>
</div>
</div></td>
<td><div class="dk_txtRes_txt txt">
<ul>
<li><p><strong>Put the Lisp file in the <code class="filePath_tl">Workspace / User</code> directory.</strong> The file will be loaded with the workspace : it will always be available for use in the patches of the same workspace.</p></li>
</ul>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="dk_txtRes_txt txt">
<ul>
<li><p><strong>Put the Lisp file in the <code class="filePath_tl">OM / Patches</code> directory.</strong> The file will be loaded at the OM start up. Bug fixes and global environment changes are generally provided and applied to the OM application this way.</p></li>
</ul>
</div></td>
<td><div class="caption">
<div class="caption_co">
<a href="../res/patchesfolder.png" class="overLnk" title="Cliquez pour agrandir"><img src="../res/patchesfolder_1.png" width="300" height="220" alt="patchesfolder_1.png"></img></a>
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="caption">
<div class="caption_co">
<a href="../res/LibFolder.png" class="overLnk" title="Cliquez pour agrandir"><img src="../res/LibFolder_1.png" width="300" height="242" alt="LibFolder_1.png"></img></a>
</div>
</div></td>
<td><div class="dk_txtRes_txt txt">
<ul>
<li><p><strong>Use a user library.</strong> The most reliable way of loading Lisp code, although it requires extra formatting work for the library.</p></li>
</ul>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="caption">

<div class="caption_co">

<p><img src="../res/Library.png" alt="Library.png"></img></p>
</div>

</div>

<div class="linkSet">

<div class="linkSet_ti">

<p><span>Create Your Own Library</span></p>
</div>

<div class="linkUL">

<ul>
<li><a href="LispUserLib.html"><span>Writing an OM Library</span></a></li>
</ul>
</div>

</div>

</div>

</div>

</div>

<div class="part">

<h2 id="finding-om-functions-sources"><span>Finding OM Functions Sources</span></h2>
<div class="part_co">

<div class="infobloc">

<div class="txt">

<p>To access the source code of a component within a patch, select it and press <code>e</code>. It will be displayed when available.</p>
</div>

</div>

<div class="infobloc">

<div class="infobloc_ti">

<p><span>Access Conditions</span></p>
</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="caption">
<div class="caption_co">
<a href="../res/find-def.png" class="overLnk" title="Cliquez pour agrandir"><img src="../res/find-def_1.png" width="300" height="212" alt="find-def_1.png"></img></a>
</div>
</div></td>
<td><div class="dk_txtRes_txt txt">
<p>The source code is accessible if the function or class is</p>
<ul>
<li><span> defined in OM : the Lisp sources of the OM environment are provided with the application</span></li>
<li><span>defined in an open text buffer or a loaded Lisp file.</span></li>
</ul>
</div></td>
</tr>
</tbody>
</table>

</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="dk_txtRes_txt txt">
<p>The source code is not accessible if</p>
<ul>
<li><span>the function or class is defined in a buffer or class which is not accessible anymore : it can have been removed or moved since its was originally evaluated or compiled</span></li>
<li><span>the function or class is part of the inbuilt Lisp environment : in this case, the sources are not accessible.</span></li>
</ul>
</div></td>
<td><div class="caption">
<div class="caption_co">
<a href="../res/lispfunction.png" class="overLnk" title="Cliquez pour agrandir"><img src="../res/lispfunction_1.png" width="300" height="250" alt="lispfunction_1.png"></img></a>
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

</div>

<div class="bloc warning">

<div class="bloc_ti warning_ti">

<p><span>Redefining Sources : Find Source Utility</span></p>
</div>

<div class="txt">

<p>The sources of existing OM functions can be found, edited and reevaluated with the <strong>Find Source</strong> utility. Nevertheless, it is advised to copy, rename and modify these functions. This allows to avoid disorders or conflicts, and to track and reload changes at the next session.</p>
</div>

</div>

</div>

</div>

</div>

</div>

</div>

<p><span class="hidden">Références : </span></p>
</div>

<div id="tplo" class="tplo_out_yes">

<div class="tplOTp">

<div class="tplOBm">

<div id="mnuFrm">

<p><span class="hidden">Plan :</span></p>
<div id="mnuFrmUp" onmouseout="menuScrollTiTask.fSpeed=0;" onmouseover="if(menuScrollTiTask.fSpeed&gt;=0) {menuScrollTiTask.fSpeed=-2; scTiLib.addTaskNow(menuScrollTiTask);}" onclick="menuScrollTiTask.fSpeed-=2;" style="display: none;">

<p><span id="mnuFrmUpLeft"><a href="#"></a></span><span id="mnuFrmUpCenter"></span><span id="mnuFrmUpRight"></span></p>
</div>

<div id="mnuScroll">

<ul>
<li><a href="OM-Documentation.html"><span>OpenMusic Documentation</span></a></li>
<li><a href="OM-User-Manual.html"><span>OM 6.6 User Manual</span></a>
<ul>
<li><a href="00-Sommaire.html"><span>Introduction</span></a></li>
<li><a href="Installation.html"><span>System Configuration and Installation</span></a></li>
<li><a href="Goingthrough.html"><span>Going Through an OM Session</span></a></li>
<li><a href="Environment.html"><span>The OM Environment</span></a></li>
<li><a href="BasicVisualProgramming.html"><span>Visual Programming I</span></a></li>
<li><a href="AdvancedVisualProgramming.html"><span>Visual Programming II</span></a></li>
<li><a href="BasicObjects.html"><span>Basic Tools</span></a></li>
<li><a href="ScoreObjects.html"><span>Score Objects</span></a></li>
<li><a href="Maquettes.html"><span>Maquettes</span></a></li>
<li><a href="Sheet.html"><span>Sheet</span></a></li>
<li><a href="MIDI.html"><span>MIDI</span></a></li>
<li><a href="Audio.html"><span>Audio</span></a></li>
<li><a href="SDIF.html"><span>SDIF</span></a></li>
<li><a href="Lisp.html"><span>Lisp Programming</span></a>
<ul>
<li><a href="LispIntro.html"><span>Introduction to Lisp</span></a></li>
<li><a href="LispEditor.html"><span>The Lisp Editor</span></a></li>
<li><a href="LispListener.html"><span>The Listener</span></a></li>
<li><span id="i3" class="outLeftSel_yes"><span>Lisp Code in OM</span></span></li>
<li><a href="LispFunctions.html"><span>Lisp Function Boxes</span></a></li>
<li><a href="LowLevel.html"><span>Lisp Tools</span></a></li>
<li><a href="LispUserLib.html"><span>Writing an OM Library</span></a></li>
<li><a href="LispForOM.html"><span>Writing Code for OM</span></a></li>
</ul></li>
<li><a href="errors.html"><span>Errors and Problems</span></a></li>
</ul></li>
<li><a href="QuickStart-Chapters.html"><span>OpenMusic QuickStart</span></a></li>
</ul>
</div>

<div id="mnuFrmDown" onmouseout="menuScrollTiTask.fSpeed=0;" onmouseover="if(menuScrollTiTask.fSpeed&lt;=0) {menuScrollTiTask.fSpeed=2; scTiLib.addTaskNow(menuScrollTiTask);}" onclick="menuScrollTiTask.fSpeed+=2;" style="display: none;">

<p><span id="mnuFrmDownLeft"><a href="#"></a></span><span id="mnuFrmDownCenter"></span><span id="mnuFrmDownRight"></span></p>
</div>

</div>

</div>

</div>

</div>

<div class="tplNav">

<p><span class="hidden">Navigation : </span><a href="LispListener.html" title="page pr&eacute;c&eacute;dente(The Listener)"><span>page précédente</span></a><span class="hidden"> | </span><a href="LispFunctions.html" title="page suivante(Lisp Function Boxes)"><span>page suivante</span></a></p>
</div>

<div id="tplb">

<p><a href="OM-Documentation_3.html"><span>A propos...</span></a>(c) Ircam - Centre Pompidou</p>
</div>

</div>
</body>
</html>
</!doctype>
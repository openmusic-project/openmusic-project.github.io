<!doctype>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta charset="utf-8"></meta>
<meta name="generator" content="pandoc"></meta>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"></meta>
<title>ReadingWriting</title>
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
</head>
<body>
<div id="tplf" class="tplPage">

<div id="tplh">

<p><span class="hidden">Navigation générale : </span></p>
<ul>
<li><a href="OM-Documentation.html"><span>Guide</span></a></li>
<li><a href="OM-Documentation_1.html"><span>Plan</span></a></li>
<li><a href="OM-Documentation_2.html"><span>Glossaire</span></a></li>
</ul>
</div>

<div id="tplt">

<p><img src="../tplRes/page/empty.gif" alt="empty.gif"></img><img src="../res/logoom1.png" alt="logoom1.png"></img><span class="tplTi">OpenMusic Documentation</span><span class="sw_outStack_navRoot"><span class="hidden">Hiérarchie de section : </span><a href="OM-User-Manual.html"><span>OM 6.6 User Manual</span></a><span class="stkSep"> > </span><a href="AdvancedVisualProgramming.html"><span>Visual Programming II</span></a><span class="stkSep"> > </span><a href="Files.html"><span>Files</span></a><span class="stkSep"> > </span><a href="File-Box.html"><span>File-Box</span></a><span class="stkSep"> > </span><span class="stkSel_yes"><span>Reading / Writing</span></span></span></p>
</div>

<div class="tplNav">

<p><span class="hidden">Navigation : </span><a href="FileBoxIntro.html" title="page pr&eacute;c&eacute;dente(Introduction)"><span>page précédente</span></a><span class="hidden"> | </span><a href="FileBoxIterations.html" title="page suivante(Designing Iterations)"><span>page suivante</span></a></p>
</div>

<div id="tplc" class="tplc_out_yes">

<div style="text-align: center;">

<p><strong>Attention</strong>, votre navigateur ne supporte pas le <strong>javascript</strong> ou celui-ci à été désactivé. Certaines fonctionnalités de ce guide sont restreintes.</p>
</div>

<div class="headCo">

<h1 id="reading-and-writing-files"><span>Reading and Writing Files</span></h1>
<div class="headCo_co">

<div>

<div class="part">

<h2 id="streamfile--a-pointer-to-read-and-write-files"><span>StreamFile : a Pointer to Read and Write Files</span></h2>
<div class="part_co">

<div class="infobloc">

<div class="txt">

<p>The StreamFile box represents the file to read or write during the File-Box process. It is attached to the file via its <a href="Pathnames.html"><span>pathname</span></a>.</p>
</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="caption">
<div class="caption_co">
<img src="../res/streamfile-init.png" width="98" height="168" alt="streamfile-init.png"></img>
</div>
</div></td>
<td><div class="dk_txtRes_txt txt">
<p>It has one input and one output :</p>
<ul>
<li><span> its input takes a pathname to a file</span></li>
<li><span>its output returns a file pointer used for reading or writing operations.</span></li>
</ul>
</div></td>
</tr>
</tbody>
</table>

</div>

</div>

<div class="infobloc">

<div class="infobloc_ti">

<p><span>Actions and Formats</span></p>
</div>

<div class="txt">

<p>The properties of the StreamFile can be edited if needed.</p>
<p>To open the <code>StreamFIle properties</code> window, double click on the box.</p>
<ul>
<li><span>Three options are offered a the top of the window : <code>Read / Write</code>, <code>Write</code>, <code>Read</code>. </span></li>
<li><span>The <code>File Type</code> pop up menu offers two file formats : text or SDIF. </span></li>
</ul>
</div>

<div class="caption">

<div class="caption_co">

<p><img src="../res/streamfile.png" alt="streamfile.png"></img></p>
</div>

</div>

</div>

<div class="infobloc">

<div class="infobloc_ti">

<p><span>File Options</span></p>
</div>

<div class="txt">

<p>The <code>File Exists</code> pop up menu offers four options, which apply to the targeted file if it exists. Each of the different options determine the way the program behaves when the text file is open or created to access its contents and the choice of a <strong>destructive or non destructive</strong> action.</p>
<ul>
<li><span>" <strong>Rename</strong> " : the existing file is renamed and a new file is created.</span></li>
<li><span>" <strong>Supersede</strong> " : the existing file is superseded; that is, a new file with the same name as the old one is created. The old file is deleted.</span></li>
<li><span>" <strong>Overwrite</strong> " : the file is not deleted but modified with the input data. For instance, if an existing file contains ten lines, and that the new data represents three lines, the three first lines of the existing file are replaced. </span></li>
<li><span>" <strong>Append</strong> " : the new data is added after the ending of the previous content of the file.</span></li>
</ul>
</div>

</div>

</div>

</div>

<div class="part">

<h2 id="writing-contents"><span>Writing Contents</span></h2>
<div class="part_co">

<div class="infobloc">

<div class="infobloc_ti">

<p><span>File-Write</span></p>
</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="dk_txtRes_txt txt">
<p>The <strong>file-write</strong> function writes something in the file.</p>
<p>It has two inputs and one output:</p>
<ul>
<li><span>"line" : the text or data to write in the file, </span></li>
<li><span> "stream" : a targeted file pointer to write in, that is, the output of the streamfile box within the File-Box.</span></li>
<li><span>Its output returns the text of the first input.</span></li>
</ul>
</div></td>
<td><div class="caption">
<div class="caption_co">
<img src="../res/filewrite.png" width="295" height="241" alt="filewrite.png"></img>
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

</div>

<div class="infobloc">

<div class="infobloc_ti">

<p><span>File-Write-Line</span></p>
</div>

<div class="txt">

<p>The <strong>file-write-line</strong> function is similar to file-write, but adds a line return at the end of the input data.</p>
</div>

<div class="caption">

<div class="caption_co">

<p><img src="../res/writelines.png" alt="Write 1001 times in the file &ndash; loop from 0 to 1000"></img></p>
</div>

<div class="caption_ti">

<p>Write 1001 times in the file – loop from 0 to 1000</p>
</div>

</div>

</div>

<div class="bloc note">

<div class="txt">

<p>To write several lines, an iterative process must be introduced in the program. Most of the time, each iteration triggers one operation in the File-Box loop.</p>
</div>

<div class="linkSet">

<div class="linkSet_ti">

<p><span>Iterative File-Box Processes</span></p>
</div>

<div class="linkUL">

<ul>
<li><a href="FileBoxIterations.html"><span>Designing an Iterative Process with the File-Box</span></a></li>
</ul>
</div>

</div>

</div>

</div>

</div>

<div class="part">

<h2 id="reading-data-from-a-file"><span>Reading Data from a File</span></h2>
<div class="part_co">

<div class="infobloc">

<div class="infobloc_ti">

<p><span>File-Read-Line</span></p>
</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="dk_txtRes_txt txt">
<p>The <strong>file-read-line</strong> function  allows to read one line in a file.</p>
<p>It has one input and one output :</p>
<ul>
<li><span>"stream" : a targeted file pointer to write in, that is, the output of the streamfile box within the File-Box.</span></li>
<li><span>Its output returns a text line.</span></li>
</ul>
<p>When all the lines of the text are exhausted, file-read-line returns "nil".</p>
</div></td>
<td><div class="caption">
<div class="caption_co">
<img src="../res/fileread.png" width="101" height="217" alt="fileread.png"></img>
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

</div>

<div class="bloc note">

<div class="txt">

<p>Most of the time, each iteration triggers one operation. In this case, the successive lines can be stored with an accumulator such as collect, as in an OMLoop.</p>
</div>

<div class="caption">

<div class="caption_co">

<p><img src="../res/6lines.png" alt="Reading and collecting the contents of the six first lines in a file &ndash; loop from 0 to 5."></img></p>
</div>

<div class="caption_ti">

<p>Reading and collecting the contents of the six first lines in a file – loop from 0 to 5.</p>
</div>

</div>

<div class="linkSet">

<div class="linkSet_ti">

<p><span>Reading Files in Iterations</span></p>
</div>

<div class="linkUL">

<ul>
<li><a href="FileBoxIterations.html"><span>Designing an Iterative Process with the File-Box</span></a></li>
</ul>
</div>

</div>

</div>

<div class="infobloc">

<div class="infobloc_ti">

<p><span>File-Eof-p</span></p>
</div>

<div class="txtRes">

<table>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<tbody>
<tr class="odd">
<td><div class="dk_txtRes_txt txt">
<p>"Eof" stands for "end of file", "p" for "predicate".</p>
<p>The <strong>file-eof-p</strong> function is a predicate, which tests if a streamfile is at the end of the file.</p>
<p>It has one input and one output :</p>
<ul>
<li><span>"stream" : a targeted file pointer to write in, that is, the output of the streamfile box within the File-Box.</span></li>
<li><span>Its output returns "t" or "nil".</span></li>
</ul>
<p>It can be associated with <strong>whileloop</strong> and <strong>OMIF</strong>, which execute a specific operation when the end of the file has been reached. Hence, this function allows to read a file whose number of lines is unknown.</p>
</div></td>
<td><div class="caption">
<div class="caption_co">
<a href="../res/read-eof.png" class="overLnk" title="Cliquez pour agrandir"><img src="../res/read-eof_1.png" width="179" height="300" alt="As long as the predicate finds no streamfile, it returns &quot;nil&quot;, and lines are collected."></img></a>
</div>
<div class="caption_ti">
As long as the predicate finds no streamfile, it returns "nil", and lines are collected.
</div>
</div></td>
</tr>
</tbody>
</table>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

<p><span class="hidden">Références : </span></p>
</div>

<div id="tplo" class="tplo_out_yes">

<div class="tplOTp">

<div class="tplOBm">

<div id="mnuFrm">

<p><span class="hidden">Plan :</span></p>
<div id="mnuFrmUp" onmouseout="menuScrollTiTask.fSpeed=0;" onmouseover="if(menuScrollTiTask.fSpeed&gt;=0) {menuScrollTiTask.fSpeed=-2; scTiLib.addTaskNow(menuScrollTiTask);}" onclick="menuScrollTiTask.fSpeed-=2;" style="display: none;">

<p><span id="mnuFrmUpLeft"><a href="#"></a></span><span id="mnuFrmUpCenter"></span><span id="mnuFrmUpRight"></span></p>
</div>

<div id="mnuScroll">

<ul>
<li><a href="OM-Documentation.html"><span>OpenMusic Documentation</span></a></li>
<li><a href="OM-User-Manual.html"><span>OM 6.6 User Manual</span></a>
<ul>
<li><a href="00-Sommaire.html"><span>Introduction</span></a></li>
<li><a href="Installation.html"><span>System Configuration and Installation</span></a></li>
<li><a href="Goingthrough.html"><span>Going Through an OM Session</span></a></li>
<li><a href="Environment.html"><span>The OM Environment</span></a></li>
<li><a href="BasicVisualProgramming.html"><span>Visual Programming I</span></a></li>
<li><a href="AdvancedVisualProgramming.html"><span>Visual Programming II</span></a>
<ul>
<li><a href="Abstraction.html"><span>Abstraction</span></a></li>
<li><a href="EvalModes.html"><span>Evaluation Modes</span></a></li>
<li><a href="HighOrder.html"><span>Higher-Order Functions</span></a></li>
<li><a href="Control.html"><span>Control Structures</span></a></li>
<li><a href="OMLoop.html"><span>Iterations: OMLoop</span></a></li>
<li><a href="Instances.html"><span>Instances</span></a></li>
<li><a href="InterfaceBoxes.html"><span>Interface Boxes</span></a></li>
<li><a href="Files.html"><span>Files</span></a>
<ul>
<li><a href="Pathnames.html"><span>Pathnames</span></a></li>
<li><a href="DefDirectories.html"><span>Default Directories</span></a></li>
<li><a href="File-Box.html"><span>File-Box</span></a>
<ul>
<li><a href="FileBoxIntro.html"><span>Introduction</span></a></li>
<li><span id="i3" class="outLeftSel_yes"><span>Reading / Writing</span></span></li>
<li><a href="FileBoxIterations.html"><span>Designing Iterations</span></a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="BasicObjects.html"><span>Basic Tools</span></a></li>
<li><a href="ScoreObjects.html"><span>Score Objects</span></a></li>
<li><a href="Maquettes.html"><span>Maquettes</span></a></li>
<li><a href="Sheet.html"><span>Sheet</span></a></li>
<li><a href="MIDI.html"><span>MIDI</span></a></li>
<li><a href="Audio.html"><span>Audio</span></a></li>
<li><a href="SDIF.html"><span>SDIF</span></a></li>
<li><a href="Lisp.html"><span>Lisp Programming</span></a></li>
<li><a href="errors.html"><span>Errors and Problems</span></a></li>
</ul></li>
<li><a href="QuickStart-Chapters.html"><span>OpenMusic QuickStart</span></a></li>
</ul>
</div>

<div id="mnuFrmDown" onmouseout="menuScrollTiTask.fSpeed=0;" onmouseover="if(menuScrollTiTask.fSpeed&lt;=0) {menuScrollTiTask.fSpeed=2; scTiLib.addTaskNow(menuScrollTiTask);}" onclick="menuScrollTiTask.fSpeed+=2;" style="display: none;">

<p><span id="mnuFrmDownLeft"><a href="#"></a></span><span id="mnuFrmDownCenter"></span><span id="mnuFrmDownRight"></span></p>
</div>

</div>

</div>

</div>

</div>

<div class="tplNav">

<p><span class="hidden">Navigation : </span><a href="FileBoxIntro.html" title="page pr&eacute;c&eacute;dente(Introduction)"><span>page précédente</span></a><span class="hidden"> | </span><a href="FileBoxIterations.html" title="page suivante(Designing Iterations)"><span>page suivante</span></a></p>
</div>

<div id="tplb">

<p><a href="OM-Documentation_3.html"><span>A propos...</span></a>(c) Ircam - Centre Pompidou</p>
</div>

</div>
</body>
</html>
</!doctype>